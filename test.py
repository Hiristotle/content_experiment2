import os
import base64
import hashlib

def process_png_files():
    # 获取当前目录
    current_dir = os.getcwd()
    
    # 查找所有PNG文件
    png_files = [f for f in os.listdir(current_dir) 
                if f.lower().endswith('.png') and os.path.isfile(os.path.join(current_dir, f))]
    
    if not png_files:
        print("当前目录下未找到PNG文件")
        return
    
    print(f"找到 {len(png_files)} 个PNG文件:")
    for i, filename in enumerate(png_files, 1):
        print(f"{i}. {filename}")
    
    # 处理每个PNG文件
    for filename in png_files:
        original_path = os.path.join(current_dir, filename)
        encoded_path = os.path.join(current_dir, f"{filename}_base64_encoded.txt")
        decoded_path = os.path.join(current_dir, f"{filename}_base64_decoded.png")
        
        try:
            # 1. 读取原始PNG文件
            with open(original_path, "rb") as f:
                original_data = f.read()
            
            # 计算原始文件哈希值
            original_hash = hashlib.md5(original_data).hexdigest()
            print(f"\n处理文件: {filename}")
            print(f"原始文件大小: {len(original_data)} 字节")
            print(f"原始文件MD5: {original_hash}")
            
            # 2. Base64编码
            encoded_data = base64.b64encode(original_data)
            print(encoded_data)
            # 保存编码后的文本文件
            with open(encoded_path, "wb") as f:
                f.write(encoded_data)
            
            print(f"已保存Base64编码文件: {encoded_path}")
            
            # 3. Base64解码
            decoded_data = base64.b64decode(encoded_data)
            # 保存解码后的PNG文件
            with open(decoded_path, "wb") as f:
                f.write(decoded_data)
            
            # 计算解码文件哈希值
            decoded_hash = hashlib.md5(decoded_data).hexdigest()
            print(f"已保存解码文件: {decoded_path}")
            print(f"解码文件大小: {len(decoded_data)} 字节")
            print(f"解码文件MD5: {decoded_hash}")
            
            # 4. 验证完整性
            if original_hash == decoded_hash:
                print("✓ 完整性验证成功: 原始文件和解码文件内容一致")
            else:
                print("✗ 完整性验证失败: 原始文件和解码文件内容不同!")
                print("警告: 文件在编码/解码过程中可能已损坏!")
            
        except Exception as e:
            print(f"处理文件 {filename} 时出错: {str(e)}")
    
    print("\n处理完成!")

if __name__ == "__main__":
    process_png_files()